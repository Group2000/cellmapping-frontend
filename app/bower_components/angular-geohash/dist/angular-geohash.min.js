"use strict";angular.module("angular-geohash",[]).factory("geohash",[function(){function a(a,b){return a/Math.pow(2,b)&1}for(var b="0123456789bcdefghjkmnpqrstuvwxyz",c={},d=0;d<b.length;d++)c[b.charAt(d)]=d;var e="auto",f=[0,5,7,8,11,12,13,15,16,17,18],g=function(a,c,d){if(d===e){if("number"==typeof a||"number"==typeof c)throw new Error("string notation required for auto precision.");var g=a.split(".")[1].length,h=c.split(".")[1].length,i=Math.max(g,h);d=f[i]}else void 0===d&&(d=9);for(var j,k=[],l=0,m=0,n=0,o=90,p=-90,q=180,r=-180;k.length<d;)if(m%2===0?(j=(q+r)/2,c>j?(n=(n<<1)+1,r=j):(n=(n<<1)+0,q=j)):(j=(o+p)/2,a>j?(n=(n<<1)+1,p=j):(n=(n<<1)+0,o=j)),l++,m++,5===l){var s=b[n];k.push(s),l=0,n=0}return k.join("")},h=function(a,b,c){c=c||52;for(var d,e=0,f=90,g=-90,h=180,i=-180,j=0;c>e;)j*=2,e%2===0?(d=(h+i)/2,b>d?(j+=1,i=d):h=d):(d=(f+g)/2,a>d?(j+=1,g=d):f=d),e++;return j},i=function(a){for(var b,d=!0,e=90,f=-90,g=180,h=-180,i=0,j=0,k=a.length;k>j;j++){var l=a[j].toLowerCase();i=c[l];for(var m=4;m>=0;m--){var n=i>>m&1;d?(b=(g+h)/2,1===n?h=b:g=b):(b=(e+f)/2,1===n?f=b:e=b),d=!d}}return[f,h,e,g]},j=function(b,c){c=c||52;for(var d=90,e=-90,f=180,g=-180,h=0,i=0,j=c/2,k=0;j>k;k++)i=a(b,2*(j-k)-1),h=a(b,2*(j-k)-2),0===h?d=(d+e)/2:e=(d+e)/2,0===i?f=(f+g)/2:g=(f+g)/2;return[e,g,d,f]},k=function(a){var b=i(a),c=(b[0]+b[2])/2,d=(b[1]+b[3])/2,e=b[2]-c,f=b[3]-d;return{latitude:c,longitude:d,error:{latitude:e,longitude:f}}},l=function(a,b){var c=j(a,b),d=(c[0]+c[2])/2,e=(c[1]+c[3])/2,f=c[2]-d,g=c[3]-e;return{latitude:d,longitude:e,error:{latitude:f,longitude:g}}},m=function(a,b){var c=k(a),d=c.latitude+b[0]*c.error.latitude*2,e=c.longitude+b[1]*c.error.longitude*2;return g(d,e,a.length)},n=function(a,b,c){c=c||52;var d=l(a,c),e=d.latitude+b[0]*d.error.latitude*2,f=d.longitude+b[1]*d.error.longitude*2;return h(e,f,c)},o=function(a){function b(a,b){return c=h+a*j,d=i+b*l,g(c,d,e)}var c,d,e=a.length,f=k(a),h=f.latitude,i=f.longitude,j=2*f.error.latitude,l=2*f.error.longitude,m=[b(1,0),b(1,1),b(0,1),b(-1,1),b(-1,0),b(-1,-1),b(0,-1),b(1,-1)];return m},p=function(a,b){function c(a,c){return d=g+a*j,e=i+c*k,h(d,e,b)}b=b||52;var d,e,f=l(a,b),g=f.latitude,i=f.longitude,j=2*f.error.latitude,k=2*f.error.longitude,m=[c(1,0),c(1,1),c(0,1),c(-1,1),c(-1,0),c(-1,-1),c(0,-1),c(1,-1)];return m},q=function(a,b,c,d,e){e=e||9;for(var f=g(a,b,e),h=g(c,d,e),j=k(f),l=2*j.error.latitude,n=2*j.error.longitude,o=i(f),p=i(h),q=Math.round((p[0]-o[0])/l),r=Math.round((p[1]-o[1])/n),s=[],t=0;q>=t;t++)for(var u=0;r>=u;u++)s.push(m(f,[t,u]));return s},r=function(a,b,c,d,e){e=e||52;for(var f=h(a,b,e),g=h(c,d,e),i=l(f,e),k=2*i.error.latitude,m=2*i.error.longitude,o=j(f,e),p=j(g,e),q=Math.round((p[0]-o[0])/k),r=Math.round((p[1]-o[1])/m),s=[],t=0;q>=t;t++)for(var u=0;r>=u;u++)s.push(n(f,[t,u],e));return s},s={ENCODE_AUTO:e,encode:g,encode_uint64:h,encode_int:h,decode:k,decode_int:l,decode_uint64:l,decode_bbox:i,decode_bbox_uint64:j,decode_bbox_int:j,neighbor:m,neighbor_int:n,neighbors:o,neighbors_int:p,bboxes:q,bboxes_int:r};return s}]);